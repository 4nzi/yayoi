<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>yayoi example</title>
  </head>
  <body>
    <canvas id="root"></canvas>
    <canvas id="root2"></canvas>

    <script src="./yayoi.js"></script>
    <script>
      const yayoi = new Yayoi(document.querySelector('#root').getContext('webgl2'))
      yayoi.loadGLB('./gltf/testSuzanne.glb', (meshes) => onload(meshes))

      const onload = (meshes) => {
        const shader = yayoi.shader()
        const shader2 = yayoi.shader({ color: [0, 1, 0] })
        const camera = yayoi.camera()
        const scene = yayoi.scene()

        meshes.forEach((mesh) => {
          if (!mesh.texture.albedo) {
            const model = yayoi.model(mesh, shader2)
            model.loadTexture(mesh.texture)
            scene.push(model)
          } else {
            const model = yayoi.model(mesh, shader)
            model.loadTexture(mesh.texture)
            scene.push(model)
            console.log(model)
          }
        })

        yayoi.render(scene, camera).start()
      }
    </script>
  </body>
</html>
