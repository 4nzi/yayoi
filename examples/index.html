<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>yayoi example</title>
  </head>
  <body>
    <canvas id="root"></canvas>
    <canvas id="root2"></canvas>

    <script src="./yayoi.js"></script>
    <script>
      const yayoi = new Yayoi(document.querySelector('#root').getContext('webgl2'))
      yayoi.loadGLB('./gltf/testSuzanne.glb', (meshes) => onload(meshes))

      const onload = (meshes) => {
        const camera = yayoi.camera()
        const scene = yayoi.scene()

        meshes.forEach((mesh) => {
          let shader
          if (mesh.texture.albedo) {
            shader = yayoi.shader({ albedo: mesh.texture.albedo })
          } else {
            shader = yayoi.shader({ albedo: [1, 1, 0], edgeWidth: 0.1 })
          }

          const model = yayoi.model(mesh, shader)

          scene.push(model)
        })

        yayoi.render(scene, camera).start()
      }
    </script>
  </body>
</html>
